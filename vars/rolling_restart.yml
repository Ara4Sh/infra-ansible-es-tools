---

endpoint: "{{ cluster_name }}.lb.{{ stage }}.int.synthesio.net:{{ cluster_port }}/_cluster"
query_before: '{
    "{{ state }}" : {
        "cluster.routing.allocation.enable" : "none"
    }
}'
query_after: '{
    "{{ state }}" : {
        "cluster.routing.allocation.enable" : "all",
        "cluster.routing.allocation.node_initial_primaries_recoveries": 50,
        "cluster.routing.allocation.node_concurrent_recoveries": 30,
        "indices.recovery.max_bytes_per_sec": "4096mb",
        "indices.recovery.concurrent_small_file_streams": "50",
        "indices.recovery.concurrent_streams": "20",
        "cluster.routing.allocation.disk.threshold_enabled" : true,
        "cluster.routing.allocation.disk.watermark.low" : "78%",
        "cluster.routing.allocation.disk.watermark.high" : "79%",
        "cluster.routing.allocation.cluster_concurrent_rebalance": 50,
        "cluster.routing.rebalance.enable": "all",
        "cluster.routing.allocation.balance.index": "0.45f",
        "cluster.routing.allocation.balance.shard": "0.45f",
        "cluster.routing.allocation.balance.threshold": "1.0f",
        "cluster.routing.allocation.allow_rebalance": "always"
    }
}'
